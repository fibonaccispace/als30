webpackJsonp_als_login([0],{"+6QT":function(t,e){},0:function(t,e){},"0Qpa":function(t,e){},"9lr7":function(t,e){},DQrM:function(t,e){},FmMw:function(t,e){},GyjG:function(t,e){},"I/ew":function(t,e){},JoFc:function(t,e){},NCHP:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),n=s("ORbq"),o=s("ppUw"),a=s.n(o),r=s("L6bb"),l=s.n(r),u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"als-login__logo-container"},[e("div",{staticClass:"als-login__logo-content"},[e("a",{attrs:{href:this.href}})])])},staticRenderFns:[]},c=s("VU/8")({name:"Logo",props:["content"],computed:{href:function(){return this.content.common.homeUrl}}},u,!1,function(t){s("kR7Y")},null,null).exports,d={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",{staticClass:"als-login__control-close",on:{click:function(e){e.stopPropagation(),t.close(e)}}},[t._v("×")])},staticRenderFns:[]},h=s("VU/8")({name:"ControlClose",props:["bus"],methods:{close:function(t){this.$root.bus.$emit("close",t)}}},d,!1,function(t){s("ZTjG")},null,null).exports,f={name:"OAuthLink",props:["service"],data:function(){return{}},methods:{getClass:function(){return"als-login__oauth-item als-login__oauth-item_"+this.service},oauth:function(){window.open(this.oauthUrl,"","width=1024,height=800,left="+(screen.availWidth-1024)/2+",top="+(screen.availHeight-800)/2+",resizable=yes,scrollbars=yes,status=yes")}},computed:{oauthUrl:function(){return"https://login.artlebedev.ru/oauth/?service="+this.service+"&"+this.$root.sidField+"&return="+window.location.href}}},m={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",{class:t.getClass(),on:{click:function(e){e.stopPropagation(),t.oauth(e)}}},[t._t("default")],2)},staticRenderFns:[]},p={name:"OAuthForm",props:["content"],data:function(){return{agree:!0}},methods:{changeAgree:function(t){this.agree=t}},computed:{isAgree:function(){return this.agree}},components:{"oauth-link":s("VU/8")(f,m,!1,null,null,null).exports},created:function(){var t=this;this.$root.bus.$on("changeAgree",function(e){return t.changeAgree(e)})}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"als-login__oauth-form"},[e("h4",[this._v(this._s(this.content.oauth.title))]),this._v(" "),e("div",{staticClass:"als-login__oauth-panel"},[this.isAgree?this._e():e("div",{staticClass:"als-login__oauth-veil"}),this._v(" "),e("oauth-link",{attrs:{service:"alfa"}}),this._v(" "),e("oauth-link",{attrs:{service:"vk"}}),this._v(" "),e("oauth-link",{attrs:{service:"gid"}}),this._v(" "),e("oauth-link",{attrs:{service:"yandex"}}),this._v(" "),e("oauth-link",{attrs:{service:"google"}}),this._v(" "),e("oauth-link",{attrs:{service:"facebook"}}),this._v(" "),e("div",{staticClass:"clear-both"})],1)])},staticRenderFns:[]},_=s("VU/8")(p,g,!1,function(t){s("VfAM")},null,null).exports,v={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"als-login__auth-form"},[this._t("title"),this._v(" "),this._t("oauth"),this._v(" "),this._t("form"),this._v(" "),this._t("notice"),this._v(" "),this._t("links")],2)},staticRenderFns:[]},b=s("VU/8")({name:"FormContainer"},v,!1,function(t){s("w6g+")},null,null).exports,w={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("form",{staticClass:"als-login__form",on:{submit:function(e){e.preventDefault(),t.submit(e)}}},[t._t("title"),t._v(" "),t._t("fields"),t._v(" "),t.$root.isError?t._t("error-notice"):t._e(),t._v(" "),t._t("button")],2)},staticRenderFns:[]},$=s("VU/8")({name:"FormInner",methods:{submit:function(t){this.$root.bus.$emit("submit",t)}}},w,!1,function(t){s("FmMw")},null,null).exports,P={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"als-login__form-fields"},[this._t("default")],2)},staticRenderFns:[]},C=s("VU/8")({name:"FormFields"},P,!1,function(t){s("nx13")},null,null).exports,L={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"model",rawName:"v-model",value:t.auth.email,expression:"auth.email"}],staticClass:"als-login__form-field als-login__form-field_first",class:{"als-login__form-field_invalid":t.isInvalid},attrs:{placeholder:t.content.form.placeholder.email,type:"email"},domProps:{value:t.auth.email},on:{focus:t.cleanup,blur:t.cleanup,input:function(e){e.target.composing||t.$set(t.auth,"email",e.target.value)}}})},staticRenderFns:[]},y=s("VU/8")({name:"EmailField",props:["auth","content"],data:function(){return{isInvalid:!1}},methods:{invalidate:function(t){this.isInvalid=!0},cleanup:function(t){this.isInvalid=!1,this.$root.bus.$emit("resetError")}},created:function(){this.$root.bus.$on("failLogin",this.invalidate),this.$root.bus.$on("failRegistration",this.invalidate),this.$root.bus.$on("failRestoration",this.invalidate),this.$root.bus.$on("failAction",this.invalidate)}},L,!1,function(t){s("QDP7")},null,null).exports,M="password",k="text",E={name:"PasswordField",props:["auth","content"],data:function(){return{passwordMode:M,isInvalid:!1}},methods:{togglePasswordMode:function(t){this.passwordMode=this.passwordMode===M?k:M},invalidate:function(t){this.isInvalid=!0,this.$root.bus.$emit("failAction")},cleanup:function(t){this.isInvalid=!1,this.$root.bus.$emit("resetError")}},created:function(){this.$root.bus.$on("failLogin",this.invalidate)},computed:{isPassPasswordMode:function(){return this.passwordMode===M},isTextPasswordMode:function(){return this.passwordMode===k},modeClass:function(){return this.isTextPasswordMode?"als-login__control-button_password-opened":""},isChangePasswordMode:function(){return this.$root.isChangePasswordMode}}},R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("span",{directives:[{name:"show",rawName:"v-show",value:t.auth.password,expression:"auth.password"}],staticClass:"als-login__control-button als-login__control-button_password",class:t.modeClass,on:{click:function(e){e.preventDefault(),t.togglePasswordMode(e)}}}),t._v(" "),t.isPassPasswordMode?s("input",{directives:[{name:"model",rawName:"v-model",value:t.auth.password,expression:"auth.password"}],staticClass:"als-login__form-field als-login__form-field_indented als-login__form-field_last",class:{"als-login__form-field_invalid":t.isInvalid,"als-login__form-field_first":t.isChangePasswordMode},attrs:{placeholder:t.content.form.placeholder.password,type:"password"},domProps:{value:t.auth.password},on:{focus:t.cleanup,blur:t.cleanup,input:function(e){e.target.composing||t.$set(t.auth,"password",e.target.value)}}}):t._e(),t._v(" "),t.isTextPasswordMode?s("input",{directives:[{name:"model",rawName:"v-model",value:t.auth.password,expression:"auth.password"}],staticClass:"als-login__form-field als-login__form-field_indented als-login__form-field_last",class:{"als-login__form-field_invalid":t.isInvalid,"als-login__form-field_first":t.isChangePasswordMode},attrs:{placeholder:t.content.form.placeholder.password,type:"text"},domProps:{value:t.auth.password},on:{focus:t.cleanup,blur:t.cleanup,input:function(e){e.target.composing||t.$set(t.auth,"password",e.target.value)}}}):t._e()])},staticRenderFns:[]},S=s("VU/8")(E,R,!1,function(t){s("mTnn")},null,null).exports,A={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"als-login__auth-links"},[t.isLoginMode||t.isRegistrationMode?s("div",{staticClass:"als-login__agreement"},[s("label",{staticClass:"als-login__label-agreement",class:{"als-login__label-agreement_checked":t.isAgree},attrs:{for:"input-agreement"},domProps:{innerHTML:t._s(t.agreementText)}})]):t._e(),t._v(" "),t.isLoginMode?s("div",[s("div",{staticClass:"als-login__auth-link"},[s("span",{on:{click:function(e){e.stopPropagation(),t.enableRestorationMode(e)}}},[t._v(t._s(t.content.authLinks.restoration.title))])]),t._v(" "),s("div",{staticClass:"als-login__auth-link"},[s("span",{on:{click:function(e){e.stopPropagation(),t.enableRegistrationMode(e)}}},[t._v(t._s(t.content.authLinks.registration.title))])])]):t.isChangePasswordMode?s("div",[s("div",{staticClass:"als-login__auth-link als-login__auth-link_cancel"},[s("span",{on:{click:function(e){e.stopPropagation(),t.cancel(e)}}},[t._v(t._s(t.content.authLinks.cancel.title))])])]):s("div",[t.validateEmail?t._e():s("div",{staticClass:"als-login__auth-link als-login__auth-link_back"},[s("span",{on:{click:function(e){e.stopPropagation(),t.back(e)}}},[t._v(t._s(t.content.authLinks.back.title))])])])])},staticRenderFns:[]},x=s("VU/8")({name:"AuthLinks",props:["content"],data:function(){return{agree:!0}},methods:{enableRegistrationMode:function(t){this.$root.bus.$emit("enableRegistrationMode",t)},enableRestorationMode:function(t){this.$root.bus.$emit("enableRestorationMode",t)},back:function(t){this.$root.bus.$emit("enableLoginMode",t)},cancel:function(t){this.$root.bus.$emit("enableAuthMode",t)},changeAgree:function(t){this.agree=!this.agree,this.$root.bus.$emit("changeAgree",this.agree)}},computed:{isLoginMode:function(){return this.$root.isLoginMode},isRegistrationMode:function(){return this.$root.isRegistrationMode},isChangePasswordMode:function(){return this.$root.isChangePasswordMode},validateEmail:function(){return this.$root.validateEmail},isAgree:function(){return this.agree},agreementText:function(){return this.isLoginMode?this.content.authLinks.agreement.login:this.isRegistrationMode?this.content.authLinks.agreement.registration:""}}},A,!1,function(t){s("dhZ6")},null,null).exports,F={render:function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"als-login__form-button",attrs:{type:"submit"}},[this._v(this._s(this.content.title))])},staticRenderFns:[]},N=s("VU/8")({name:"SubmitButton",props:["content"]},F,!1,function(t){s("sRcB")},null,null).exports,U={name:"LoginForm",props:["auth","content"],data:function(){return{text:this.content.login,agree:!0}},methods:{changeAgree:function(t){this.agree=t}},computed:{validateEmail:function(){return this.$root.validateEmail},isError:function(){return this.$root.isError},isAgree:function(){return this.agree}},created:function(){var t=this;this.$root.bus.$on("changeAgree",function(e){return t.changeAgree(e)})},components:{container:b,"oauth-form":_,"form-inner":$,fields:C,"email-field":y,"password-field":S,"submit-button":N,"auth-links":x}},T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("container",[e("h2",{attrs:{slot:"title"},slot:"title"},[this._v(this._s(this.text.title))]),this._v(" "),e("oauth-form",{attrs:{slot:"oauth",content:this.content},slot:"oauth"}),this._v(" "),e("form-inner",{attrs:{slot:"form"},slot:"form"},[e("h4",{attrs:{slot:"title"},slot:"title"},[this._v(this._s(this.text.form.title))]),this._v(" "),e("fields",{attrs:{slot:"fields"},slot:"fields"},[e("email-field",{attrs:{auth:this.auth,content:this.text}}),this._v(" "),e("password-field",{attrs:{auth:this.auth,content:this.text}})],1),this._v(" "),e("p",{staticClass:"als-login__form-error",attrs:{slot:"error-notice"},slot:"error-notice"},[this._v(this._s(this.text.form.errors.default))]),this._v(" "),e("submit-button",{attrs:{slot:"button",disabled:!(this.validateEmail&&this.auth.password&&this.isAgree),content:this.text.form.button},slot:"button"})],1),this._v(" "),e("auth-links",{attrs:{slot:"links",content:this.content},slot:"links"})],1)},staticRenderFns:[]},O={name:"RegistrationForm",props:["auth","content"],data:function(){return{text:this.content.registration,emailClass:"als-login__form-field_last",agree:!0}},methods:{changeAgree:function(t){this.agree=t}},computed:{validateEmail:function(){return this.$root.validateEmail},isAgree:function(){return this.agree}},created:function(){var t=this;this.$root.bus.$on("changeAgree",function(e){return t.changeAgree(e)})},components:{container:b,"oauth-form":_,"form-inner":$,fields:C,"email-field":y,"submit-button":N,"auth-links":x}},I={render:function(){var t=this.$createElement,e=this._self._c||t;return e("container",[e("h2",{attrs:{slot:"title"},slot:"title"},[this._v(this._s(this.text.title))]),this._v(" "),e("oauth-form",{attrs:{slot:"oauth",content:this.content},slot:"oauth"}),this._v(" "),e("form-inner",{attrs:{slot:"form"},slot:"form"},[e("h4",{attrs:{slot:"title"},slot:"title"},[this._v(this._s(this.text.form.title))]),this._v(" "),e("fields",{attrs:{slot:"fields"},slot:"fields"},[e("email-field",{class:this.emailClass,attrs:{auth:this.auth,content:this.text}})],1),this._v(" "),e("p",{staticClass:"als-login__form-error",attrs:{slot:"error-notice"},slot:"error-notice"},[this._v(this._s(this.text.form.errors.default))]),this._v(" "),e("submit-button",{attrs:{slot:"button",disabled:!(this.validateEmail&&this.isAgree),content:this.text.form.button},slot:"button"})],1),this._v(" "),e("auth-links",{attrs:{slot:"links",content:this.content},slot:"links"})],1)},staticRenderFns:[]},V={name:"RestorationForm",props:["auth","content"],data:function(){return{text:this.content.restoration,emailClass:"als-login__form-field_last"}},computed:{validateEmail:function(){return this.$root.validateEmail}},components:{container:b,"form-inner":$,fields:C,"email-field":y,"submit-button":N,"auth-links":x}},H={render:function(){var t=this.$createElement,e=this._self._c||t;return e("container",[e("h2",{attrs:{slot:"title"},slot:"title"},[this._v(this._s(this.text.title))]),this._v(" "),e("form-inner",{attrs:{slot:"form"},slot:"form"},[e("fields",{attrs:{slot:"fields"},slot:"fields"},[e("p",{staticClass:"als-login__form-notice",domProps:{innerHTML:this._s(this.text.form.notice.restoration)}}),this._v(" "),e("email-field",{class:this.emailClass,attrs:{auth:this.auth,content:this.text}})],1),this._v(" "),e("p",{staticClass:"als-login__form-error",attrs:{slot:"error-notice"},slot:"error-notice"},[this._v(this._s(this.text.form.errors.default))]),this._v(" "),e("submit-button",{attrs:{slot:"button",disabled:!this.validateEmail,content:this.text.form.button},slot:"button"})],1),this._v(" "),e("auth-links",{attrs:{slot:"links",content:this.content},slot:"links"})],1)},staticRenderFns:[]},q={name:"ChangePasswordForm",props:["auth","content"],data:function(){return{text:this.content.changePassword}},computed:{validatePassword:function(){return this.auth.prevPassword?this.auth.password&&!(this.auth.prevPassword===this.auth.password):this.auth.password}},components:{container:b,"form-inner":$,fields:C,"password-field":S,"submit-button":N,"auth-links":x}},D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("container",[e("h2",{attrs:{slot:"title"},slot:"title"},[this._v(this._s(this.text.title))]),this._v(" "),e("form-inner",{attrs:{slot:"form"},slot:"form"},[e("fields",{attrs:{slot:"fields"},slot:"fields"},[e("password-field",{attrs:{auth:this.auth,content:this.text}})],1),this._v(" "),e("submit-button",{attrs:{slot:"button",disabled:!this.validatePassword,content:this.text.form.button},slot:"button"})],1),this._v(" "),e("auth-links",{attrs:{slot:"links",content:this.content},slot:"links"})],1)},staticRenderFns:[]},B={name:"AuthForm",props:["auth","content"],data:function(){return{body:null}},methods:{beforeEnterLogin:function(t){this.body&&this.body.classList.add("als-login-mode_animated")},afterEnterLogin:function(t){this.body&&this.body.classList.remove("als-login-mode_animated")},beforeLeaveLogin:function(t){this.body&&this.body.classList.add("als-login-mode_animated")},afterLeaveLogin:function(t){this.body&&this.body.classList.remove("als-login-mode_animated")},afterEnterAuth:function(){var t=document.getElementsByClassName("als-login__form-field_last");t.length>0&&t[0].focus()}},computed:{isLoginMode:function(){return this.$root.isLoginMode},isRegistrationMode:function(){return this.$root.isRegistrationMode},isRestorationMode:function(){return this.$root.isRestorationMode},isChangePasswordMode:function(){return this.$root.isChangePasswordMode}},created:function(){this.body=document.querySelector("body")},components:{"login-form":s("VU/8")(U,T,!1,null,null,null).exports,"registration-form":s("VU/8")(O,I,!1,null,null,null).exports,"restoration-form":s("VU/8")(V,H,!1,function(t){s("qLSt")},null,null).exports,"change-password-form":s("VU/8")(q,D,!1,function(t){s("QKRa")},null,null).exports}},G={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("transition",{attrs:{name:"fade-login"},on:{"before-enter":this.beforeEnterLogin,"after-enter":this.afterEnterLogin,"before-leave":this.beforeLeaveLogin,"after-leave":this.afterLeaveLogin}},[this.isLoginMode?e("login-form",{attrs:{auth:this.auth,content:this.content}}):this._e()],1),this._v(" "),e("transition",{attrs:{name:"fade-auth"},on:{"after-enter":this.afterEnterAuth}},[this.isRegistrationMode?e("registration-form",{attrs:{auth:this.auth,content:this.content}}):this.isRestorationMode?e("restoration-form",{attrs:{auth:this.auth,content:this.content}}):this.isChangePasswordMode?e("change-password-form",{attrs:{auth:this.auth,content:this.content}}):this._e()],1)],1)},staticRenderFns:[]},W=s("VU/8")(B,G,!1,function(t){s("0Qpa")},null,null).exports,j={render:function(){this.$createElement;this._self._c;return this._m(0,!1,!1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"product-wallet"},[e("div",{staticClass:"product-wallet-item product-wallet-item__fokus"},[e("a",{staticClass:"product-wallet-link",attrs:{href:"https://fokus.am/ru"}},[e("div",{staticClass:"product-wallet-col"},[e("div",{staticClass:"product-wallet-logo"})]),this._v(" "),e("div",{staticClass:"product-wallet-col"},[e("div",{staticClass:"product-wallet-description"},[this._v("«Фокус»: купон на скидку 10 %")]),this._v(" "),e("div",{staticClass:"product-wallet-promocode"},[this._v("NOVICE10")])])])]),this._v(" "),e("div",{staticClass:"product-wallet-item product-wallet-item__zhurnalus"},[e("a",{staticClass:"product-wallet-link",attrs:{href:"https://zhurnalus.artlebedev.ru/about/#subscribe"}},[e("div",{staticClass:"product-wallet-col"},[e("div",{staticClass:"product-wallet-logo"})]),this._v(" "),e("div",{staticClass:"product-wallet-col"},[e("div",{staticClass:"product-wallet-description"},[this._v("«Журналус»: купон на скидку 10 %")]),this._v(" "),e("div",{staticClass:"product-wallet-promocode"},[this._v("NOVICE10")])])])]),this._v(" "),e("div",{staticClass:"product-wallet-item product-wallet-item__kampus"},[e("a",{staticClass:"product-wallet-link",attrs:{href:"https://www.artlebedev.ru/kampus/?utm_source=als&utm_medium=register&utm_campaign=alsweb"}},[e("div",{staticClass:"product-wallet-col"},[e("div",{staticClass:"product-wallet-logo"})]),this._v(" "),e("div",{staticClass:"product-wallet-col"},[e("div",{staticClass:"product-wallet-description"},[this._v("Кампус: прием заявок до конца февраля")]),this._v(" "),e("div",{staticClass:"product-wallet-promocode"})])])]),this._v(" "),e("div",{staticClass:"product-wallet-item product-wallet-item__tail product-wallet-item__tail_violet"}),this._v(" "),e("div",{staticClass:"product-wallet-item product-wallet-item__tail product-wallet-item__tail_red"}),this._v(" "),e("div",{staticClass:"product-wallet-item product-wallet-item__tail product-wallet-item__tail_white"})])}]},Q={components:{ProductWallet:s("VU/8")({name:"ProductWallet"},j,!1,function(t){s("oDe1")},null,null).exports},name:"SuccessNotice",props:["content"],methods:{success:function(t){this.$root.bus.$emit("resetSuccessfully",t)}},computed:{text:function(){return this.$root.isRegistrationMode?this.content.successNotice.registration:this.$root.isRestorationMode?this.content.successNotice.restoration:this.$root.isChangePasswordMode?this.content.successNotice.changePassword:{}}}},J={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"als-login__success-notice"},[e("div",{staticClass:"als-login__success-link"}),this._v(" "),e("h2",[this._v(this._s(this.text.title))]),this._v(" "),e("p",{staticClass:"als-login__success-content",domProps:{innerHTML:this._s(this.text.content)}}),this._v(" "),this.$root.session&&"ru"===this.$root.session.locale&&this.$root.isRegistrationMode?e("product-wallet"):this._e()],1)},staticRenderFns:[]},z={name:"AuthPopup",props:["auth","content"],methods:{afterLeaveForm:function(t){this.$root.bus.$emit("setSuccessfully")},afterEnterNotice:function(t){var e=this;setTimeout(function(){e.$root.bus.$emit("close")},3e3)}},computed:{isBeforeSuccessfully:function(){return this.$root.beforeSuccessfully},isSuccessfully:function(){return this.$root.successfully}},components:{logo:c,"control-close":h,"auth-form":W,"success-notice":s("VU/8")(Q,J,!1,function(t){s("c0pP")},null,null).exports}},K={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"als-login__auth-popup"},[e("control-close"),this._v(" "),e("logo",{attrs:{content:this.content}}),this._v(" "),e("transition",{attrs:{name:"fade-success-form"},on:{"after-leave":this.afterLeaveForm}},[this.isSuccessfully||this.isBeforeSuccessfully?this._e():e("auth-form",{attrs:{auth:this.auth,content:this.content}})],1),this._v(" "),e("transition",{attrs:{name:"fade-success-notice"},on:{"after-enter":this.afterEnterNotice}},[this.isSuccessfully?e("success-notice",{attrs:{content:this.content}}):this._e()],1)],1)},staticRenderFns:[]},X=s("VU/8")(z,K,!1,function(t){s("DQrM")},null,null).exports,Z={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"als-login__person-nav"},[this._t("default")],2)},staticRenderFns:[]},Y=s("VU/8")(null,Z,!1,function(t){s("I/ew")},null,null).exports,tt={props:{name:{type:String,required:!0},path:{type:String,required:!0},content:{type:Object,required:!0}},computed:{href:function(){return""+this.content.host+this.path}}},et={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"als-login__person-nav-item"},[e("a",{staticClass:"als-login__person-nav-link",attrs:{href:this.href}},[this._v(this._s(this.content[this.name]))])])},staticRenderFns:[]},st=s("VU/8")(tt,et,!1,function(t){s("pQKh")},null,null).exports,it={name:"PersonPanel",props:{content:{type:Object,required:!0},user:{type:Object,required:!0}},computed:{isStudioWorker:function(){return this.user.is_studio_worker},isStudioCustomer:function(){return this.user.is_studio_customer},hasMainFavorites:function(){return this.user.has_main_favorites&&null!==this.content.favorites},isVisible:function(){return this.isStudioWorker||this.isStudioCustomer||this.hasMainFavorites}},components:{PersonNav:Y,NavItem:st}},nt={render:function(){var t=this.$createElement,e=this._self._c||t;return this.isVisible?e("person-nav",[this.isStudioWorker?e("nav-item",{attrs:{name:"worker",path:"/studio/me/",content:this.content}}):this._e(),this._v(" "),this.isStudioCustomer?e("nav-item",{attrs:{name:"cabinetus",path:"/cabinetus/",content:this.content}}):this._e(),this._v(" "),this.hasMainFavorites?e("nav-item",{attrs:{name:"favorites",path:"/favorites/",content:this.content}}):this._e()],1):this._e()},staticRenderFns:[]},ot=s("VU/8")(it,nt,!1,null,null,null).exports,at={name:"PersonPanel",props:{content:{type:Object,required:!0}},components:{PersonNav:Y,NavItem:st}},rt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("person-nav",[e("nav-item",{attrs:{name:"orders",path:"/profile/orders/",content:this.content}}),this._v(" "),e("nav-item",{attrs:{name:"bonuses",path:"/profile/bonuses/",content:this.content}}),this._v(" "),e("nav-item",{attrs:{name:"mailing",path:"/profile/mailing-list/",content:this.content}})],1)},staticRenderFns:[]},lt=s("VU/8")(at,rt,!1,null,null,null).exports,ut={name:"PersonPanel",props:{content:{type:Object,required:!0}},methods:{enableChangePasswordMode:function(t){this.$root.bus.$emit("enableChangePasswordMode",t)},enableProfileMode:function(t){this.$root.bus.$emit("enableProfileMode",t)}},components:{PersonNav:Y,NavItem:st}},ct={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("person-nav",[s("div",{staticClass:"als-login__person-nav-item"},[s("span",{staticClass:"als-login__person-nav-link",on:{click:function(e){e.stopPropagation(),t.enableProfileMode(e)}}},[t._v(t._s(t.content.editPerson))])]),t._v(" "),s("div",{staticClass:"als-login__person-nav-item"},[s("span",{staticClass:"als-login__person-nav-link",on:{click:function(e){e.stopPropagation(),t.enableChangePasswordMode(e)}}},[t._v(t._s(t.content.changePassword))])])])},staticRenderFns:[]},dt=s("VU/8")(ut,ct,!1,null,null,null).exports,ht={name:"PersonPanel",props:{user:{type:Object,required:!0},content:{type:Object,required:!0}},methods:{logout:function(t){this.$root.bus.$emit("logout",t)},clickOutside:function(t){this.$root.isPersonMode&&this.$root.bus.$emit("close")},click:function(t){}},mounted:function(){document.addEventListener("click",this.clickOutside)},components:{ControlClose:h,MainNavigation:ot,StoreNavigation:lt,LoginNavigation:dt}},ft={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"als-login__person-panel",on:{click:function(e){e.stopPropagation(),t.click(e)}}},[s("div",{staticClass:"als-login__person-panel-inner"},[s("control-close"),t._v(" "),t._t("header"),t._v(" "),s("div",{staticClass:"als-login__person-panel-settings"})],2),t._v(" "),s("div",{staticClass:"als-login__person-panel-wrapper als-login__person-panel-wrapper_bottom"},[s("main-navigation",{attrs:{content:t.content.personPanel.title.main,user:t.user}}),t._v(" "),s("store-navigation",{attrs:{content:t.content.personPanel.title.store}}),t._v(" "),s("login-navigation",{attrs:{content:t.content.personPanel.title}}),t._v(" "),s("div",{staticClass:"als-login__logout-button"},[s("span",{staticClass:"als-login__button-inner",on:{click:function(e){e.stopPropagation(),t.logout(e)}}},[t._v(t._s(t.content.authPanel.sign_out))])])],1)])},staticRenderFns:[]},mt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"als-login__person-panel-header",class:this.imageClass},[this.displayName?e("div",{staticClass:"als-login__person-name"},[this._v(this._s(this.displayName))]):this._e()])},staticRenderFns:[]},pt={name:"AuthModule",props:["auth","user","content"],data:function(){return{body:null}},methods:{beforeEnterPopup:function(){this.body&&(this.body.classList.add("need-trans"),this.body.classList.add("reduced"))},afterEnterPopup:function(){if(this.body){this.body.classList.add("als-login-mode_opened");var t=document.getElementsByClassName("als-login__form-field_first");t.length>0&&t[0].focus()}},beforeLeavePopup:function(){this.body&&(this.body.classList.remove("als-login-mode_opened"),this.body.classList.remove("reduced"))},afterLeavePopup:function(){this.body&&this.body.classList.remove("need-trans")}},created:function(){this.body=document.querySelector("body"),"/login/"!==location.pathname&&"/login"!==location.pathname||this.$root.bus.$emit("enableLoginMode")},components:{"auth-popup":X,"person-panel":s("VU/8")(ht,ft,!1,function(t){s("GyjG")},null,null).exports,"person-panel-header":s("VU/8")({name:"PersonPanelHeader",props:["user"],computed:{displayName:function(){return this.$root.displayName},imageClass:function(){return this.user.pictures?"als-login__person-panel-header_image":""}}},mt,!1,function(t){s("q9fW")},null,null).exports}},gt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"als-login"},[e("transition",{attrs:{name:"fade-popup"},on:{"before-enter":this.beforeEnterPopup,"after-enter":this.afterEnterPopup,"before-leave":this.beforeLeavePopup,"after-leave":this.afterLeavePopup}},[this.$parent.isAuthMode||this.$parent.isPersonMode||this.$parent.isProfileMode?this._e():e("auth-popup",{attrs:{auth:this.auth,content:this.content}})],1),this._v(" "),e("transition",{attrs:{name:"fade-person"}},[this.$parent.isPersonMode?e("person-panel",{attrs:{user:this.user,content:this.content}},[e("person-panel-header",{attrs:{slot:"header",user:this.user},slot:"header"})],1):this._e()],1)],1)},staticRenderFns:[]},_t=s("VU/8")(pt,gt,!1,function(t){s("fVcp")},null,null).exports,vt={name:"AuthPanel",props:["user","content"],data:function(){return{}},methods:{loginMode:function(t){this.$root.bus.$emit("enableLoginMode")},personMode:function(t){this.$root.bus.$emit("enablePersonMode")},handleClick:function(){this.$root.bus.$emit("enableProfileMode")}},computed:{displayName:function(){return this.$root.displayName},isLogined:function(){return this.$root.isLogined}},created:function(){this.isLogined&&(this.controls=document.getElementsByClassName("als-login__edit-form-control"),this.controls&&this.controls.length>0&&this.controls[0].addEventListener("click",this.handleClick))},destroyed:function(){this.controls&&this.controls.length>0&&this.controls[0].removeEventListener("click",this.handleClick)}},bt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade-auth-panel"}},[s("div",{staticClass:"als-login__auth-panel"},[t.isLogined?s("div",{staticClass:"als-login__logout-panel"},[s("div",{staticClass:"als-login__auth-link"},[s("span",{staticClass:"als-login__auth-settings-link",on:{click:function(e){e.stopPropagation(),t.personMode(e)}}},[t._v(t._s(t.displayName))]),t._v(" "),s("span",{staticClass:"als-login__auth-settings-link als-login__auth-settings-link_mobile",on:{click:function(e){e.stopPropagation(),t.personMode(e)}}})])]):s("div",{staticClass:"als-login__login-panel"},[s("div",{staticClass:"als-login__auth-link"},[s("span",{staticClass:"als-login__auth-login-link",on:{click:function(e){e.stopPropagation(),t.loginMode(e)}}},[t._v(t._s(t.content.sign_in))]),t._v(" "),s("span",{staticClass:"als-login__auth-login-link als-login__auth-login-link_mobile",on:{click:function(e){e.stopPropagation(),t.loginMode(e)}}})])])])])},staticRenderFns:[]},wt=s("VU/8")(vt,bt,!1,function(t){s("NCHP")},null,null).exports,$t={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"als-login__profile-form-wrapper"},[s("label",{directives:[{name:"show",rawName:"v-show",value:t.showLabel,expression:"showLabel"}],staticClass:"als-login__profile-form-label"},[t._v(t._s(t.placeholder))]),t._v(" "),"checkbox"===t.getType()?s("input",{directives:[{name:"model",rawName:"v-model",value:t.profile[t.field.name],expression:"profile[field.name]"}],staticClass:"als-login__profile-form-field",attrs:{placeholder:t.placeholder,name:t.field.name,required:t.field.required,disabled:t.isDisabled,type:"checkbox"},domProps:{checked:Array.isArray(t.profile[t.field.name])?t._i(t.profile[t.field.name],null)>-1:t.profile[t.field.name]},on:{input:t.input,change:function(e){var s=t.profile[t.field.name],i=e.target,n=!!i.checked;if(Array.isArray(s)){var o=t._i(s,null);i.checked?o<0&&(t.profile[t.field.name]=s.concat([null])):o>-1&&(t.profile[t.field.name]=s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.profile,t.field.name,n)}}}):"radio"===t.getType()?s("input",{directives:[{name:"model",rawName:"v-model",value:t.profile[t.field.name],expression:"profile[field.name]"}],staticClass:"als-login__profile-form-field",attrs:{placeholder:t.placeholder,name:t.field.name,required:t.field.required,disabled:t.isDisabled,type:"radio"},domProps:{checked:t._q(t.profile[t.field.name],null)},on:{input:t.input,change:function(e){t.$set(t.profile,t.field.name,null)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.profile[t.field.name],expression:"profile[field.name]"}],staticClass:"als-login__profile-form-field",attrs:{placeholder:t.placeholder,name:t.field.name,required:t.field.required,disabled:t.isDisabled,type:t.getType()},domProps:{value:t.profile[t.field.name]},on:{input:[function(e){e.target.composing||t.$set(t.profile,t.field.name,e.target.value)},t.input]}})])},staticRenderFns:[]},Pt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"als-login__profile-form-img"},[this.profile.pictures?e("img",{attrs:{src:this.profile.pictures.medium}}):this._e()])},staticRenderFns:[]},Ct={name:"ProfileForm",props:["user","content"],data:function(){return{fields:[{name:"first_name"},{name:"last_name"},{name:"middle_name"},{name:"nicname"},{name:"email",required:!0,pattern:this.$root.pattern.EMAIL},{name:"phone"}],modifiedFields:[],invalidFields:[],profile:{},modified:!1,updating:!1,successfully:!1,fail:!1,buttonHidden:!0,noticeHidden:!0,valid:!0}},methods:{fillProfile:function(){if(this.user)for(var t in this.user)this.profile[t]=this.user[t]},invalidate:function(t){this.invalidFields.findIndex(function(e,s,i){return e===t})<0&&this.invalidFields.push(t)},validate:function(t){var e=this.invalidFields.findIndex(function(e,s,i){return e===t});e>=0&&this.invalidFields.splice(e,1)},change:function(t){var e=this.modifiedFields.findIndex(function(e,s,i){return e===t});this.profile[t]===this.user[t]||void 0===this.user[t]&&0===this.profile[t].length?e>=0&&this.modifiedFields.splice(e,1):e<0&&this.modifiedFields.push(t),this.modified=this.modifiedFields.length>0},successUpdate:function(t){this.updating=!1,this.modified=!1,this.successfully=!0},failUpdate:function(t){this.updating=!1,this.modified=!1,this.successfully=!1,this.fail=!0},submit:function(t){this.updating=!0;for(var e=0;e<t.target.length;e++)t.target.elements[e].blur();this.$root.bus.$emit("submitProfile",t,this.profile)},beforeEnterButton:function(t){this.buttonHidden=!1},afterLeaveButton:function(t){this.buttonHidden=!0},beforeEnterNotice:function(t){this.noticeHidden=!1},afterEnterNotice:function(t){var e=this;setTimeout(function(){e.successfully=!1},3e3)},afterLeaveNotice:function(t){this.noticeHidden=!0,this.$root.bus.$emit("afterSubmitProfile")}},computed:{isValid:function(){return 0===this.invalidFields.length},isModified:function(){return this.modified},isUpdating:function(){return this.updating},isSuccessfully:function(){return this.successfully}},created:function(){this.fillProfile();var t=this.invalidate;this.$root.bus.$on("invalidProfile",function(e){return t(e)});var e=this.validate;this.$root.bus.$on("validProfile",function(t){return e(t)});var s=this.change;this.$root.bus.$on("changeProfile",function(t){return s(t)});var i=this.successUpdate;this.$root.bus.$on("successUpdateProfile",function(t){return i(t)});var n=this.failUpdate;this.$root.bus.$on("failUpdateProfile",function(t){return n(t)})},components:{fields:C,field:s("VU/8")({name:"ProfileFormField",props:["profile","field","content"],data:function(){return{disabled:!1,value:null}},methods:{getType:function(){return"email"!==this.field.name?"text":"email"},validate:function(){return(!this.field.required||this.value)&&(!this.field.pattern||this.field.pattern.test(this.value))},input:function(t){this.value=t.target.value,this.isInvalid=!this.validate(),this.isInvalid?this.$root.bus.$emit("invalidProfile",this.field.name):this.$root.bus.$emit("validProfile",this.field.name),this.$root.bus.$emit("changeProfile",this.field.name)},submitProfile:function(){this.disabled=!0},afterSubmitProfile:function(){this.disabled=!1}},computed:{isDisabled:function(){return this.disabled},placeholder:function(){return this.content.form.placeholder[this.field.name]},showLabel:function(){return!!this.value}},created:function(){this.value=this.profile[this.field.name];var t=this.submitProfile;this.$root.bus.$on("submitProfile",function(e,s){return t()}),this.$root.bus.$on("afterSubmitProfile",this.afterSubmitProfile)}},$t,!1,function(t){s("gUUM")},null,null).exports,"field-image":s("VU/8")({name:"ProfileFormField",props:["profile","content"],methods:{}},Pt,!1,function(t){s("9lr7")},null,null).exports,"submit-button":N}},Lt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"als-login__profile-form",attrs:{autocomplete:"off"},on:{submit:function(e){e.preventDefault(),t.submit(e)}}},[s("field-image",{attrs:{profile:t.profile,content:t.content.profileForm}}),t._v(" "),s("fields",t._l(t.fields,function(e){return s("field",{key:e.name,attrs:{profile:t.profile,field:e,content:t.content.profileForm}})})),t._v(" "),s("div",{staticClass:"als-login__profile-form-footer"},[s("transition",{attrs:{name:"fade-in-fade-out"},on:{"before-enter":t.beforeEnterButton,"after-leave":t.afterLeaveButton}},[t.isModified&&t.isValid&&!t.isUpdating&&t.noticeHidden?s("submit-button",{attrs:{content:t.content.profileForm.form.button}}):t._e()],1),t._v(" "),s("transition",{attrs:{name:"fade-in-fade-out"},on:{"before-enter":t.beforeEnterNotice,"after-enter":t.afterEnterNotice,"after-leave":t.afterLeaveNotice}},[t.isSuccessfully&&t.buttonHidden?s("p",{staticClass:"als-login__profile-notice als-login__profile-notice_success"},[t._v(t._s(t.content.profileForm.form.notice.success))]):t._e()])],1)],1)},staticRenderFns:[]},yt={name:"PersonProfile",props:["user","content"],data:function(){return{body:null}},methods:{afterEnterPopup:function(){this.body&&this.body.classList.add("als-profile-mode_opened")},beforeLeavePopup:function(){this.body&&this.body.classList.remove("als-profile-mode_opened")}},created:function(){this.body=document.querySelector("body")},components:{"control-close":h,"profile-form":s("VU/8")(Ct,Lt,!1,function(t){s("+6QT")},null,null).exports}},Mt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"fade-profile"},on:{"before-enter":this.afterEnterPopup,"after-leave":this.beforeLeavePopup}},[e("div",{staticClass:"als-login__person-profile"},[e("control-close"),this._v(" "),e("profile-form",{attrs:{user:this.user,content:this.content}})],1)])},staticRenderFns:[]},kt=s("VU/8")(yt,Mt,!1,function(t){s("JoFc")},null,null).exports;i.a.use(n.a),i.a.use(a.a),i.a.use(l.a),i.a.config.productionTip=!1;var Et="https://login.artlebedev.ru/api",Rt=Et+"/sessions",St="als_login_sid",At="als_login_dev",xt={AUTH:"auth",LOGIN:"login",REGISTRATION:"registration",RESTORATION:"restoration",CHANGE_PASSWORD:"change_password",PERSON:"person",PROFILE:"profile"},Ft={EXPIRES:"365d",LOCALE:"ru",LOCALE_COM:"en"},Nt="return",Ut={SID:"als_login_sid",AUTH:"als_login_auth"},Tt={EMAIL:/^(?:[-!\#$%&'*+/=?^_`{}|~0-9a-z]+(?:\.[-!\#$%&'*+/=?^^_`{}|~0-9a-z]+)*|"(?:[\001-\010\013\014\016-\037!\#-\[\]-\177]|\\[\001-011\013\014\016-\177])*")@(?:[a-z0-9-]+\.)+[a-z]{2,11}$/i,COM:/\.com$/i},Ot="https://www.artlebedev.",It={ru:Ot+"ru",en:Ot+"com"},Vt="https://store.artlebedev.",Ht={ru:Vt+"ru",en:Vt+"com"},qt={before:"Нажимая кнопку",after:'я даю согласие на обработку моих <a href="'+Ht.ru+'/terms/" target="_blank">персональных данных</a>'},Dt={before:"By clicking the",after:'button, I consent to the processing of my <a href="'+Ht.en+'/terms/" target="_blank">personal data</a>'},Bt={ru:{common:{homeUrl:It.ru},personPanel:{title:{settingHeader:"Фон в шапке",editPerson:"Изменить личные данные",changePassword:"Изменить пароль",main:{host:It.ru,worker:"Кабинет студийца",cabinetus:"Кабинетус",favorites:"Понравилось"},store:{host:Ht.ru,orders:"Заказы",bonuses:"Волшебные баллы",mailing:"Почтовая рассылка",wishes:["желание","желания","желаний"]}}},authPanel:{sign_in:"Войти",sign_out:"Выйти"},oauth:{title:"Через социальные сети"},login:{title:"Вход",form:{title:"С паролем",button:{title:"Войти"},placeholder:{email:"Электропочта",password:"Пароль"},errors:{default:"Такого сочетания адреса электропочты и пароля в регистратуре нет"}}},registration:{title:"Регистрация",form:{title:"Через электронную почту",notice:{registration:"На указанную почту будет отправлен пароль от вашего аккаунта"},button:{title:"Зарегистрироваться"},placeholder:{email:"Электропочта"},errors:{default:"Такой адрес электропочты у нас уже записан"}}},restoration:{title:"Восстановление пароля",form:{title:"Через электронную почту",notice:{restoration:"Для получения нового пароля нужно вписать в поле ниже адрес электронной почты, указанный при регистрации"},button:{title:"Восстановить пароль"},placeholder:{email:"Электропочта"},errors:{default:"Такой адрес электропочты у нас нигде не записан"}}},changePassword:{title:"Изменение пароля",form:{button:{title:"Изменить пароль"},placeholder:{password:"Новый пароль"}}},profileForm:{form:{button:{title:"Сохранить изменения"},placeholder:{first_name:"Имя",last_name:"Фамилия",middle_name:"Отчество",nicname:"Ник",email:"Почта",phone:"Телефон"},notice:{success:"Данные сохранены",fail:""}}},authLinks:{restoration:{title:"Я не помню пароль"},registration:{title:"Зарегистрироваться"},back:{title:"Назад"},cancel:{title:"Отмена"},agreement:{login:qt.before+" «Войти», "+qt.after,registration:qt.before+" «Зарегистрироваться», "+qt.after}},successNotice:{registration:{title:"Регистрация",content:"Поздравляем! Вы зарегистрированы. Проверьте свою почту, на нее мы отправили пароль от вашего аккаунта.<br />"},restoration:{title:"Восстановление пароля",content:"Проверьте свою почту, на нее мы отправили новый пароль от вашего аккаунта.<br />"},changePassword:{title:"Изменение пароля",content:"Пароль успешно изменен.<br />"}}},en:{common:{homeUrl:It.en},personPanel:{title:{settingHeader:"Header background",editPerson:"Change personal information",changePassword:"Change password",main:{host:It.en,worker:null,cabinetus:"Cabinetus",favorites:null},store:{host:Ht.en,profile:"Store account",orders:"Orders",bonuses:"Bonuses",mailing:"News subscription",wishes:["wish","wishes"]}}},authPanel:{sign_in:"Log in",sign_out:"Log out"},oauth:{title:"Using a social media account"},login:{title:"Log in",form:{title:"With password",button:{title:"Log in"},placeholder:{email:"Email",password:"Password"},errors:{default:"We can’t find this combination of email address and password in the registry"}}},registration:{title:"Registration",form:{title:"Using email",notice:{registration:"The password for your account will be sent to the email address you entered"},button:{title:"Register"},placeholder:{email:"Email"},errors:{default:"We already have a record of this email address"}}},restoration:{title:"Password restore",form:{title:"Using email",notice:{restoration:"To receive a new password, enter the email address used during registration in the field below"},button:{title:"Restore password"},placeholder:{email:"Email"},errors:{default:"We do not have a record of this email address"}}},changePassword:{title:"Change password",form:{button:{title:"Change password"},placeholder:{password:"New password"}}},profileForm:{form:{button:{title:"Save changes"},placeholder:{first_name:"Name",last_name:"Last name",middle_name:"Middle name",nicname:"Nicname",email:"Email",phone:"Phone number"},notice:{success:"Data saved",fail:""}}},authLinks:{restoration:{title:"Forgot password"},registration:{title:"Register"},back:{title:"Back"},cancel:{title:"Cancel"},agreement:{login:Dt.before+" «Log in» "+Dt.after,registration:Dt.before+" «Register» "+Dt.after}},successNotice:{registration:{title:"Registration",content:"Congratulations! Your account has been created. Please check your email for a letter with your password.<br />"},restoration:{title:"Password restore",content:"Check your email for a letter with the new password.<br />"},changePassword:{title:"Change password",content:"Password changed successfully<br />"}}}},Gt=function(t){var e="(?:[?|&]+)"+t+"=([^?&]+)";return window.location.search.match(e)},Wt=new i.a,jt=new i.a({data:function(){return{uri:{api:{als_login:{auth:"https://login.artlebedev.ru/api/auth",session:Rt,user:"https://login.artlebedev.ru/api/users"}}}}},methods:{failAction:function(){Wt.$emit("failAction")},successChangePassword:function(t){Wt.$emit("afterChangePassword")},failChangePassword:function(t){},changePassword:function(t){this.$http.post(this.uri.api.als_login.user+"/"+Qt.user.uid+"/password/change/",t).then(this.successChangePassword,this.failAction)},successRestoration:function(t){Wt.$emit("afterRestoration")},failRestoration:function(t){},restoration:function(t){this.$http.post(this.uri.api.als_login.auth+"/restore/",t).then(this.successRestoration,this.failAction)},successRegistration:function(t){try{Wt.$emit("afterRegistration",JSON.parse(t.bodyText))}catch(e){this.failRegistration(t)}},failRegistration:function(t){},registration:function(t){this.$http.post(this.uri.api.als_login.user+"/",t).then(this.successRegistration,this.failAction)},successLogout:function(t){try{var e=JSON.parse(t.bodyText);Wt.$emit("afterLogout",e)}catch(e){this.failLogout(t)}},failLogout:function(t){Wt.$emit("afterLogout",null)},makeRequest:function(t){return t+=St+"="+this.$cookies.get(St),this.$cookies.get(At)&&(t+="&"+At+"="+this.$cookies.get(At)),t},addPostFields:function(t){t.append(St,this.$cookies.get(St)),this.$cookies.get(At)&&t.append(At,this.$cookies.get(At))},logout:function(t){this.$http.get(this.makeRequest(this.uri.api.als_login.auth+"/logout/?")).then(this.successLogout,this.failLogout)},successLogin:function(t){try{var e=JSON.parse(t.bodyText);Wt.$emit("afterLogin",e)}catch(e){this.failLogin(t)}},failLogin:function(t){Wt.$emit("failLogin",t)},login:function(t){this.$http.post(this.uri.api.als_login.auth+"/login/",t).then(this.successLogin,this.failLogin)},submit:function(t){var e=new FormData;for(var s in Qt.auth)(Qt.isLoginMode||Qt.isChangePasswordMode||"password"!==s)&&(Qt.auth[s]?e.append(s,Qt.auth[s]):e.append(s,""));this.addPostFields(e),Qt.isLoginMode?this.login(e):Qt.isRegistrationMode?(e.append("login",1),this.registration(e)):Qt.isRestorationMode?this.restoration(e):Qt.isChangePasswordMode&&this.changePassword(e)},successSubmitProfile:function(t){try{var e=JSON.parse(t.bodyText);Qt.user=e.user,Wt.$emit("successUpdateProfile",e.user),Qt.initEvent("afterUpdateProfile")}catch(e){this.failSubmitProfile(t)}},failSubmitProfile:function(t){Wt.$emit("failUpdateProfile",t)},submitProfile:function(t,e){var s=new FormData;for(var i in e)"pictures"!==i&&(e[i]?s.append(i,e[i]):s.append(i,""));this.addPostFields(s),this.$http.post(this.uri.api.als_login.user+"/"+e.uid+"/",s).then(this.successSubmitProfile,this.failAction)}},created:function(){Wt.$on("submit",this.submit),Wt.$on("logout",this.logout);var t=this.submitProfile;Wt.$on("submitProfile",function(e,s){return t(e,s)})}}),Qt=new i.a({el:"#als-login-module",data:function(){return{auth:{email:"",password:"",prev_password:""},session:null,user:null,bus:Wt,mode:xt.AUTH,successfully:!1,beforeSuccessfully:!1,isSessionLoaded:!1,content:"",body:null,error:!1}},template:'<AuthModule v-if="sessionLoaded" :auth="auth" :user="user" :content="content" />',components:{AuthModule:_t},methods:{initEvent:function(t){var e=null;try{e=new Event(t)}catch(s){(e=document.createEvent("Event")).initEvent(t,!0,!0)}document.dispatchEvent(e)},close:function(t){"/profile/"===location.pathname||"/profile"===location.pathname||"/login/"===location.pathname||"/login"===location.pathname?location.pathname="/":this.resetSuccessfully()},toggleAuthMode:function(t){this.mode!==t&&(this.mode=t,this.setError(!1),this.body&&(this.isAuthMode?(this.body.classList.remove("als-login-mode"),this.body.classList.remove("als-person-mode"),this.body.classList.remove("als-profile-mode")):this.isPersonMode?(this.body.classList.add("als-person-mode"),this.body.classList.remove("als-login-mode"),this.body.classList.remove("als-profile-mode")):this.isProfileMode?(this.body.classList.add("als-profile-mode"),this.body.classList.remove("als-login-mode"),this.body.classList.remove("als-person-mode")):(this.body.classList.add("als-login-mode"),this.body.classList.remove("als-person-mode"),this.body.classList.remove("als-profile-mode"))))},enableAuthMode:function(){this.isRegistrationMode&&this.isSuccessfully&&this.initEvent("afterRegistration"),this.toggleAuthMode(xt.AUTH)},enablePersonMode:function(){this.toggleAuthMode(xt.PERSON)},enableLoginMode:function(){this.mode===xt.LOGIN||this.isLogined||this.toggleAuthMode(xt.LOGIN)},enableRegistrationMode:function(){this.toggleAuthMode(xt.REGISTRATION)},enableRestorationMode:function(){this.toggleAuthMode(xt.RESTORATION)},enableChangePasswordMode:function(){this.auth.prev_password=this.auth.password,this.auth.password="",this.toggleAuthMode(xt.CHANGE_PASSWORD)},enableProfileMode:function(){this.toggleAuthMode(xt.PROFILE)},processProfile:function(){this.isLogined?Wt.$emit("enableProfileMode",this.enableProfileMode):location.pathname="/"},successLoadSession:function(t,e){try{this.initSession(JSON.parse(t.bodyText)),e?e():"/profile/"!==location.pathname&&"/profile"!==location.pathname||this.processProfile()}catch(e){this.failLoadSession(t)}},failLoadSession:function(){this.initSession(null)},loadSession:function(t){var e=this;this.$cookies.get(St)?(this.isSessionLoaded=!1,this.$http.get(jt.makeRequest(Rt+"/current/?")).then(function(s){e.successLoadSession(s,t)},this.failLoadSession)):this.initSession(null)},initSession:function(t){this.session=t,this.session&&(this.user=this.session.user,this.setSessionCookie(),window.onAlsLogin&&window.onAlsLogin(this.session)),t&&t.locale&&Bt[t.locale]?this.content=Bt[t.locale]:Tt.COM.test(window.location.hostname)?this.content=Bt[Ft.LOCALE_COM]:this.content=Bt[Ft.LOCALE],this.isSessionLoaded=!0,!this.isLogined&&Gt(Nt)&&Wt.$emit("enableLoginMode")},getCookieDomain:function(){return this.session?this.session.domain:null},getCookieExpires:function(){return"1"===this.session.is_remember?Ft.EXPIRES:"0"},setSessionCookie:function(){this.session&&(this.$cookies.remove(St,"/"),this.$cookies.remove(Ut.AUTH,"/"),this.$cookies.set(St,this.session.sid,this.getCookieExpires(),"/",this.getCookieDomain(),!0),"1"===this.session.is_logined&&this.$cookies.set(Ut.AUTH,l()(this.session.sid),this.getCookieExpires(),"/",this.getCookieDomain(),!0))},afterChangePassword:function(){Wt.$emit("beforeSuccessfully")},afterRestoration:function(){Wt.$emit("beforeSuccessfully")},afterRegistration:function(t){this.initSession(t),Wt.$emit("beforeSuccessfully")},afterLogout:function(t){this.$cookies.remove(Ut.AUTH,"/",this.getCookieDomain()),this.initSession(t),this.close(),this.initEvent("afterLogout")},afterLogin:function(t){this.initSession(t),this.close(),this.body&&(this.body.classList.remove("reduced"),this.body.classList.remove("need-trans")),this.initEvent("afterLogin"),this.session&&this.$cookies.set(Ut.AUTH,l()(this.session.sid),this.getCookieExpires(),"/",this.getCookieDomain(),!0)},afterSubmitProfile:function(){if(this.session){var t=l()(this.session.sid+(new Date).getTime().toString());this.$cookies.set(Ut.AUTH,t,this.getCookieExpires(),"/",this.getCookieDomain(),!0)}},setBeforeSuccessfully:function(){this.beforeSuccessfully=!0},setSuccessfully:function(){this.beforeSuccessfully=!1,this.successfully=!0},resetSuccessfully:function(){this.enableAuthMode(),this.successfully=!1},setError:function(t){this.error=t},keyUpHandler:function(t){27==t.keyCode&&(this.isAuthMode||this.enableAuthMode())},addKeyUpListener:function(){document.addEventListener("keyup",this.keyUpHandler)},getRussianDeclension:function(t,e){return function(t,e){return/1[1-4]$/.test(t)?e[2]:/[2-4]$/.test(t)?e[1]:/1$/.test(t)?e[0]:e[2]}(t,e)}},computed:{sessionLoaded:function(){return this.isSessionLoaded},isBeforeSuccessfully:function(){return this.beforeSuccessfully},isSuccessfully:function(){return this.successfully},isLogined:function(){return this.sessionLoaded&&this.session&&"1"===this.session.is_logined&&this.session.user},isAuthMode:function(){return this.mode===xt.AUTH},isLoginMode:function(){return this.mode===xt.LOGIN},isRegistrationMode:function(){return this.mode===xt.REGISTRATION},isRestorationMode:function(){return this.mode===xt.RESTORATION},isProfileMode:function(){return this.mode===xt.PROFILE},isChangePasswordMode:function(){return this.mode===xt.CHANGE_PASSWORD},isPersonMode:function(){return this.mode===xt.PERSON},validateEmail:function(){return this.auth.email&&Tt.EMAIL.test(this.auth.email)},sidField:function(){return St+"="+this.$cookies.get(St)},isError:function(){return this.error},displayName:function(){return this.user?this.user.nicname?this.user.nicname:this.user.first_name?this.user.last_name?this.user.first_name+" "+this.user.last_name:this.user.first_name:this.user.last_name?this.user.last_name:"":""}},mounted:function(){this.body=document.querySelector("body"),this.content=Bt.ru,this.loadSession(),Wt.$on("close",this.close),Wt.$on("enableAuthMode",this.enableAuthMode),Wt.$on("enablePersonMode",this.enablePersonMode),Wt.$on("enableLoginMode",this.enableLoginMode),Wt.$on("enableRegistrationMode",this.enableRegistrationMode),Wt.$on("enableRestorationMode",this.enableRestorationMode),Wt.$on("enableChangePasswordMode",this.enableChangePasswordMode),Wt.$on("enableProfileMode",this.enableProfileMode),Wt.$on("beforeSuccessfully",this.setBeforeSuccessfully),Wt.$on("setSuccessfully",this.setSuccessfully),Wt.$on("resetSuccessfully",this.resetSuccessfully);var t=this.setError;Wt.$on("failAction",function(){return t(!0)}),Wt.$on("resetError",function(){return t(!1)});var e=this.afterLogin;Wt.$on("afterLogin",function(t){return e(t)});var s=this.afterLogout;Wt.$on("afterLogout",function(t){return s(t)});var i=this.afterRegistration;Wt.$on("afterRegistration",function(t){return i(t)});var n=this.afterRestoration;Wt.$on("afterRestoration",function(){return n()});var o=this.afterChangePassword;Wt.$on("afterChangePassword",function(){return o()});var a=this.afterSubmitProfile;Wt.$on("afterSubmitProfile",function(){return a()});var r=this.loadSession;Wt.$on("reloadSession",function(t){return r(t)}),this.addKeyUpListener()}});new i.a({el:"#als-login-panel",data:function(){return{authModule:Qt,bus:Wt,content:{}}},template:'<AuthPanel v-if="sessionLoaded" :user="authModule.user" :content="content" />',components:{AuthPanel:wt},computed:{sessionLoaded:function(){return Qt.sessionLoaded&&(this.content=Qt.content.authPanel),Qt.sessionLoaded},isLogined:function(){return Qt.isLogined},displayName:function(){return this.authModule.displayName}}}),new i.a({el:"#als-login-profile",data:function(){return{authModule:Qt,bus:Wt,pattern:Tt}},template:'<PersonProfile v-if="isProfileMode" :user="authModule.user" :content="content" />',components:{PersonProfile:kt},computed:{content:function(){return Qt.content},isProfileMode:function(){return Qt.isProfileMode}}});if(window.opener&&window.opener.origin===window.origin){var Jt=Gt(St);Jt&&(a.a.set(St,Jt[1],Ft.EXPIRES,"/",!0),a.a.set(Ut.AUTH,l()(Jt[1]),Ft.EXPIRES,"/",!0)),window.opener.location=window.opener.location.origin+window.opener.location.pathname,window.close()}},QDP7:function(t,e){},QKRa:function(t,e){},VfAM:function(t,e){},ZTjG:function(t,e){},c0pP:function(t,e){},dhZ6:function(t,e){},fVcp:function(t,e){},gUUM:function(t,e){},kR7Y:function(t,e){},mTnn:function(t,e){},nx13:function(t,e){},oDe1:function(t,e){},pQKh:function(t,e){},q9fW:function(t,e){},qLSt:function(t,e){},sRcB:function(t,e){},"w6g+":function(t,e){}},["NHnr"]);